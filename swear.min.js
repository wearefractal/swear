(function(){var e,t=[].slice;e=function(){var e;return e={efns:[],fns:[],completed:!1,wrap:function(){return function(){var n,r;return r=arguments[0],n=2>arguments.length?[]:t.call(arguments,1),r!=null?e.abort(r):e.resolve.apply(e,n)}},resolve:function(){var n,r,i,s,o;r=1>arguments.length?[]:t.call(arguments,0),e.val=r,e.completed=!0,o=e.fns;for(i=0,s=o.length;i<s;i++)n=o[i],n.apply(null,r);return e},abort:function(t){var n,r,i,s;e.err=t,e.completed=!0,s=e.efns;for(r=0,i=s.length;r<i;r++)n=s[r],n(t);return e},fail:function(t){return e.err?t(e.err):e.efns.push(t),e},when:function(t){return e.val?t.apply(null,e.val):e.fns.push(t),e}}},e.join=function(){var n,r,i,s,o,u,a;o=1>arguments.length?[]:t.call(arguments,0),n=[],i=e(),r=function(){var e,s;return e=1>arguments.length?[]:t.call(arguments,0),s=o.pop(),s?s.when(function(){var e;return e=1>arguments.length?[]:t.call(arguments,0),n.push(e),r.apply(null,e)}):i.resolve.apply(i,n)};for(u=0,a=o.length;u<a;u++)s=o[u],s.fail(i.abort);return r(),i},typeof module!="undefined"&&module!==null?module.exports=e:window.swear=e}).call(this);